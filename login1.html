<html>
    <head>
            <script src="https://unpkg.com/@descope/web-component@3.15.5/dist/index.js"></script>
    <script src="https://unpkg.com/@descope/web-js-sdk@1.12.1/dist/index.umd.js"></script>
    </head>
</html>

<div id="container"></div>

    <script>
        sdk.refresh()
        const container = document.getElementById('container')

        if (!sessionToken) { 
            container.innerHTML = '<descope-wc project-id="' + projectId + '" flow-id="sign-in"></descope-wc>'
            const wcElement = document.getElementsByTagName('descope-wc')[0]

            const onSuccess = (e) => {
                sdk.refresh()
                //window.location.href = "/profile"
            }

            const onError = (err) => console.log(err);

            wcElement.addEventListener('success', onSuccess)
            wcElement.addEventListener('error', onError)
        } else {
            window.location.href = "/profile"
        }
    </script>
{% endblock %}
